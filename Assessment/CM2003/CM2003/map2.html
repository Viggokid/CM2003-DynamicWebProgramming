<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="css.css">
  <title>CM2003</title>
</head>
<body>
<!---Header bars--->
<div id = "head-bar">
  <div class = "header">
    <h1>CM2003</h1>
    <img class = "icon" width = 50 height = 50 src="http://bestcoverphoto.com/wp-content/uploads/coverphotos/River-Source-Nature-Ruda-facebook-cover-photos-250x250.jpg">

  </div>

  <!---Navigation Bar--->
  <div class= "navbar">
    <ul>
      <li><a href="home.html" >Home</a></li>
      <li><a href="map.html">Map</a></li>
      <li><a href="story.html">Historical Stories</a></li>
      <li><a href="album.html">Album</a></li>
    </ul>
  </div>

</div>
<!--- End of Navigation --->


<!-- the map-->
<div id = "page">
  <div id="map"></div>
  <div class = "navigationalButtons">
    <input type="button" value="Back" id="back" onclick='changeText("This is story1")'/>
    <input type="button" value="Next" id="next" onclick='changeText("This is story2")'/>
  </div>
</div>
<script>

  window.onload = function() {
    initMap('aberdeen, uk','newtonhill, uk');
  };


  function initMap(origin, destination) {
    var directionsService = new google.maps.DirectionsService;
    var directionsDisplay = new google.maps.DirectionsRenderer;
    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 7,
      center: {lat: 57.1184, lng: -2.1410}
    });
    directionsDisplay.setMap(map);


    calculateAndDisplayRoute(directionsService,directionsDisplay,origin,destination);

    map.setMapTypeId(google.maps.MapTypeId.TERRAIN);

    map.set('styles', [
      {
        featureType: 'road',
        elementType: 'geometry',
        stylers: [
          { color: '#f4a460' },
          { weight: 1 }
        ]
      }, {
        featureType: 'road',
        elementType: 'labels',
        stylers: [
          { saturation: -100 },
          { invert_lightness: true }
        ]
      },

    ]);
  }

  function calculateAndDisplayRoute(directionsService, directionsDisplay, origin, destination) {
    directionsService.route({
      origin: origin,
      destination: destination,
      travelMode: google.maps.TravelMode.WALKING
    }, function(response, status) {
      if (status === google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      } else {
        window.alert('Directions request failed due to ' + status);
      }
    });
  }



  function changeText(value){
    document.getElementById('pText').innerHTML = value;
  }
</script>

<noscript>
  <style type="text/css">
    #map {display:none;}
    .noscriptmsg{display:block}
    footer{position: absolute;bottom: 0}

  </style>
  <div class="noscriptmsg">
    <div id = "noscripttxt">You don't have javascript enabled.  Google Maps will not work. This is a non-interactive image.</div>
    <img id = "routeImage2" src="route2.png" width = 1024px height = 550px>

  </div>
</noscript>


<div id="panel-left" class="mypanel">
  <p><b>Routes</b></p>
  <div id="noscript">
    <div class = "route1"><a href="map.html"><p>Route 1: Aberdeen to Newtonhill</p></a></div>
    <div class = "route2"><a href="map2.html"><p>Route 2: Stonehaven to Montrose</p></a></div>
  </div>
  <script>
    $("#noscript").hide();
    $("#script").show();
  </script>
  <div id = "script">
    <div class = "route1"><a href="javascript:initMap('aberdeen, uk','newtonhill, uk');"><p>Route 1: Aberdeen to Newtonhill</p></a></div>
    <div class = "route2"><a href="javascript:initMap('stonehaven, uk','montrose, uk');"><p>Route 2: Stonehaven to Montrose</p></a></div>
  </div>
</div>

<footer>
  <p id='pText'>Selected Icon on Map will have its story appear here in short form. Link to long form story here</p>
</footer>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAilh9E9C8ZFLldI5VIdjDDkXemojBrhzU&callback=initMap">
</script>
</body>
</html>